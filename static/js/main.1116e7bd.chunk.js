(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{101:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),o=(a(98),a(101),a(22)),i=a(52),l=a(78),u=a.n(l),d=a(60),m=a(61),f=a(31),v=a(40),p=function(){function e(t){var a=this;Object(o.a)(this,e),this.axiosInstance=void 0,this.resourceUrl=void 0,this.list=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.defaultParams,t=e.url,n=void 0===t?a.resourceUrl:t,r=e.params,c=Object(v.a)(e,["url","params"]);return a.axiosInstance.get(n,Object(f.a)({params:r},c))},this.retrieve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.defaultParams,n=t.url,r=void 0===n?a.resourceUrl:n,c=Object(v.a)(t,["url"]),s="".concat(r,"/").concat(e);return a.axiosInstance.get(s,Object(f.a)({},c))},this.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.defaultParams,n=t.url,r=void 0===n?a.resourceUrl:n,c=Object(v.a)(t,["url"]);return a.axiosInstance.post(r,e,Object(f.a)({},c))},this.update=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.defaultParams,r=n.url,c=void 0===r?a.resourceUrl:r,s=n.method,o=void 0===s?"patch":s,i=Object(v.a)(n,["url","method"]),l="".concat(c,"/").concat(e);return a.axiosInstance.request(Object(f.a)({url:l,data:t,method:o},i))},this.delete=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.defaultParams,n=t.url,r=void 0===n?a.resourceUrl:n,c=Object(v.a)(t,["url"]),s="".concat(r,"/").concat(e);return a.axiosInstance.delete(s,Object(f.a)({},c))},this.axiosInstance=t}return Object(i.a)(e,[{key:"defaultParams",get:function(){return{url:this.resourceUrl}}}]),e}(),b=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).resourceUrl="users",e}return a}(p),h=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).resourceUrl="users_tasks",e}return a}(p),g=new(function(){function e(){Object(o.a)(this,e),this.axiosInstance=void 0,this.users=void 0,this.tasks=void 0,this.basicResponse=function(e){return e.data}}return Object(i.a)(e,[{key:"initialize",value:function(e){return this.axiosInstance=u.a.create({baseURL:e}),this.addResponseInterceptor(this.basicResponse),this.users=new b(this.axiosInstance),this.tasks=new h(this.axiosInstance),this}},{key:"addResponseInterceptor",value:function(e){return this.axiosInstance.interceptors.response.use(e),this}}]),e}()),k={BASE_API:"http://todo-app-backend-api.herokuapp.com/"},E=a(12),O=a.n(E),j=a(8);function U(e,t){var a=O.a.mark(r),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};function r(){var r;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t.loading=!0,a.next=4,e;case 4:return r=a.sent,a.abrupt("return",n(r));case 6:return a.prev=6,t.loading=!1,a.finish(6);case 9:case"end":return a.stop()}}),a,null,[[0,,6,9]])}return Object(j.c)(r)()}var C=function(e,t){return x.async(e,t,(function(e){return Object(j.a)(t,e),t}))},x={async:U,asyncAssign:C,asyncAssignPath:function(e,t,a){return x.async(e,t,(function(e){return t[a]=e,t[a]}))}},w={TODO:"todo",DONE:"done"},y=j.e.model("Task",{id:j.e.identifierNumber,description:j.e.string,state:j.e.enumeration(Object.values(w)),userId:j.e.number}).views((function(e){return{get isDone(){return e.state===w.DONE}}})).actions((function(e){return{update:function(t){return Object.assign(e,t),C(g.tasks.update(e.id,t),e)},toggle:function(){var t={state:e.isDone?w.TODO:w.DONE};return Object.assign(e,t),C(g.tasks.update(e.id,t),e)},remove:function(){var t=Object(j.d)(e,2).remove;t(e)}}})),I=j.e.model("TasksStore",{data:j.e.array(y),loading:!1}).actions((function(e){return{list:function(t){return C(g.tasks.list({params:{userId:t}}),e)},add:Object(j.c)(O.a.mark((function t(a,n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,g.tasks.create(Object(f.a)({},n,{state:w.TODO,userId:a}));case 3:return r=t.sent,e.data.push(r),e.loading=!1,t.abrupt("return",e.data);case 7:case"end":return t.stop()}}),t)}))),delete:Object(j.c)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,g.tasks.delete(a.id);case 3:return Object(j.b)(a),e.loading=!1,t.abrupt("return",e.data);case 6:case"end":return t.stop()}}),t)})))}})),D=j.e.model("User",{id:j.e.identifierNumber,name:j.e.string,tasks:j.e.optional(I,{})}).actions((function(e){return{update:function(t){return Object.assign(e,t),U(g.users.update(e.id,t),e)},remove:function(){(0,Object(j.d)(e,2).removeUser)(e)},select:function(){(0,Object(j.d)(e,2).selectUser)(e)}}})),S=j.e.model("Users",{data:j.e.array(D),selectedUser:j.e.maybe(j.e.safeReference(D)),loading:!1}).actions((function(e){return{selectUser:function(t){e.selectedUser=t},listUsers:function(){return C(g.users.list(),e)},addUser:Object(j.c)(O.a.mark((function t(a){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,g.users.create(a);case 3:return n=t.sent,e.data.push(n),e.loading=!1,t.abrupt("return",e.data);case 7:case"end":return t.stop()}}),t)}))),removeUser:Object(j.c)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,g.users.delete(a.id);case 3:return Object(j.b)(a),e.loading=!1,t.abrupt("return",e.data);case 6:case"end":return t.stop()}}),t)})))}})),P=r.a.createContext(null),T=S.create();var A=function(e){var t=e.children;return r.a.createElement(P.Provider,{value:T},t)},N=a(35),F=a(173),R=a(20);function B(){var e=function(){var e=r.a.useContext(P);if(e)return e;throw new Error("useStore must be used within a StoreProvider.")}(),t=e.listUsers,a=e.selectedUser;return r.a.useEffect((function(){t()}),[t]),r.a.useEffect((function(){null===a||void 0===a||a.tasks.list(a.id)}),[a]),e}function W(e){var t=r.a.useState(!!e),a=Object(R.a)(t,2),n=a[0],c=a[1];return[n,r.a.useCallback((function(){return c(!0)}),[]),r.a.useCallback((function(){c(!1)}),[])]}var _=a(53),z=a(41),J=a(172),q=a(168),L=a(174),$=a(166),G=a(167),H=a(169),K=a(170),M=a(171),Q=a(86),V=a.n(Q),X=a(85),Y=a.n(X),Z=a(83),ee=a.n(Z),te=a(84),ae=a.n(te),ne=a(177),re=a(165),ce=a(163),se=a(164),oe=a(162);var ie=r.a.memo((function(e){var t=e.open,a=e.onClose,n=e.onConfirm;return r.a.createElement(ne.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(oe.a,{id:"alert-dialog-title"},"Warning"),r.a.createElement(ce.a,null,r.a.createElement(se.a,{id:"alert-dialog-description"},"Are you sure you want to delete?")),r.a.createElement(re.a,null,r.a.createElement($.a,{onClick:a,color:"secondary"},"Cancel"),r.a.createElement($.a,{onClick:n,color:"primary",autoFocus:!0},"Confirm")))}));function le(e){var t=e.text,a=e.onClick,n=e.onUpdate,c=e.onDelete,s=e.isSelected,o=e.options,i=W(),l=Object(R.a)(i,3),u=l[0],d=l[1],m=l[2],f=W(),v=Object(R.a)(f,3),p=v[0],b=v[1],h=v[2],g=r.a.useState(t),k=Object(R.a)(g,2),E=k[0],O=k[1],j=r.a.useCallback((function(e){var t=e.target;O(t.value)}),[]),U=r.a.useCallback((function(){m(),c()}),[c,m]),C=r.a.useCallback((function(){n(E),h()}),[n,E,h]);return r.a.createElement(r.a.Fragment,null,p?r.a.createElement(G.a,{dense:!0,button:!0,selected:s},r.a.createElement(L.a,{autoFocus:!0,margin:"dense",label:"Name",fullWidth:!0,value:E,onChange:j}),r.a.createElement(H.a,null,r.a.createElement(K.a,{"aria-label":"save",onClick:C},r.a.createElement(ee.a,null)),r.a.createElement(K.a,{"aria-label":"read",onClick:h},r.a.createElement(ae.a,null)))):r.a.createElement(G.a,{dense:!0,button:!0,onClick:a,selected:s},r.a.createElement(M.a,{primary:t}),r.a.createElement(H.a,null,o,r.a.createElement(K.a,{"aria-label":"edit",onClick:b},r.a.createElement(Y.a,null)),r.a.createElement(K.a,{"aria-label":"delete",onClick:d},r.a.createElement(V.a,null)))),r.a.createElement(ie,{open:u,onClose:m,onConfirm:U}))}le.defaultProps={isSelected:!1};var ue=r.a.memo(le);var de=r.a.memo((function(e){var t=e.name,a=e.selectUser,n=e.updateUser,c=e.deleteUser,s=e.isSelected,o=r.a.useCallback((function(){return c()}),[c]),i=r.a.useCallback((function(e){return n({name:e})}),[n]);return r.a.createElement(ue,{text:t,onClick:a,isSelected:s,onUpdate:i,onDelete:o})}));var me=Object(N.a)((function(e){var t=e.addUser,a=e.loading,n=e.selectedUser,c=e.data,s=r.a.useState(""),o=Object(R.a)(s,2),i=o[0],l=o[1],u=r.a.useCallback((function(e){var t=e.target;l(t.value)}),[]),d=r.a.useCallback(Object(_.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({name:i});case 2:l("");case 3:case"end":return e.stop()}}),e)}))),[t,i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{variant:"h4"},"Users"),a&&r.a.createElement(J.a,null),r.a.createElement(q.a,null,c.map((function(e){return r.a.createElement(de,{key:e.id,isSelected:(null===n||void 0===n?void 0:n.id)===e.id,name:e.name,selectUser:e.select,deleteUser:e.remove,updateUser:e.update})}))),r.a.createElement(L.a,{label:"Name",value:i,onChange:u}),r.a.createElement($.a,{onClick:d,variant:"contained",color:"primary",disabled:!i},"Add User"))})),fe=a(176);var ve=r.a.memo((function(e){var t=e.text,a=e.isDone,n=e.toggle,c=e.deleteTask,s=e.updateTask,o=r.a.useCallback((function(){return c()}),[c]),i=r.a.useCallback((function(e){return s({description:e})}),[s]);return r.a.createElement(ue,{text:t,onUpdate:i,onDelete:o,options:[r.a.createElement(fe.a,{key:"toggle",checked:a,onChange:n,inputProps:{"aria-label":"primary checkbox"}})]})}));var pe=Object(N.a)((function(e){var t=e.addTask,a=e.loading,n=e.data,c=e.taskOwner,s=r.a.useState(""),o=Object(R.a)(s,2),i=o[0],l=o[1],u=r.a.useCallback((function(e){var t=e.target;l(t.value)}),[]),d=r.a.useCallback(Object(_.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(c.id,{description:i});case 2:l("");case 3:case"end":return e.stop()}}),e)}))),[t,i,c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{variant:"h4"},"Tasks"),a&&r.a.createElement(J.a,null),r.a.createElement(q.a,null,n.map((function(e){return r.a.createElement(ve,{key:e.id,text:e.description,isDone:e.isDone,toggle:e.toggle,deleteTask:e.remove,updateTask:e.update})}))),r.a.createElement(L.a,{label:"Name",value:i,onChange:u,fullWidth:!0}),r.a.createElement($.a,{onClick:d,variant:"contained",color:"primary",disabled:!i},"Add task"))})),be=Object(F.a)({container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%"},listContainer:{width:"50%",marginTop:50,marginBottom:50}});var he=Object(N.a)((function(){var e=be(),t=B();return r.a.createElement("div",{className:e.container},r.a.createElement("div",{className:e.listContainer},r.a.createElement(me,{loading:t.loading,data:t.data,addUser:t.addUser,selectedUser:t.selectedUser})),r.a.createElement("div",{className:e.listContainer},t.selectedUser&&r.a.createElement(pe,{taskOwner:t.selectedUser,data:t.selectedUser.tasks.data,loading:t.selectedUser.tasks.loading,addTask:t.selectedUser.tasks.add})))}));g.initialize(k.BASE_API);var ge=function(){return r.a.createElement(A,null,r.a.createElement(he,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,a){e.exports=a(125)}},[[93,1,2]]]);
//# sourceMappingURL=main.1116e7bd.chunk.js.map